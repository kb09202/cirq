import socket
import matplotlib.pyplot as plt
import seaborn as sns

def scan_ports(ip, port_range=(1, 1000)):
    open_ports = []
    for port in range(port_range[0], port_range[1] + 1):
        with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:
            s.settimeout(0.5)
            if s.connect_ex((ip, port)) == 0:
                open_ports.append(port)
    return open_ports

def visualize_ports(ip, ports):
    if not ports:
        print(f'Aucun port ouvert trouvé sur {ip}.')
        return

    plt.figure(figsize=(10, 5))
    sns.barplot(x=ports, y=[1]*len(ports), palette='coolwarm')
    plt.xlabel('Ports ouverts')
    plt.title(f'Scan des ports pour {ip}')
    plt.show()

# Exécution
ip_target = '192.168.1.1'  # À modifier selon la cible
o_ports = scan_ports(ip_target)
print(f'Ports ouverts sur {ip_target}: {o_ports}')
visualize_ports(ip_target, o_ports)
